:jbake-type: post
:jbake-status: published
:jbake-title: Mais quâ€™est-ce que je fais de mon Raspberry ?
:jbake-tags: mail,maison,raspberrypi,rss,twitter,_mois_nov.,_annÃ©e_2019
:jbake-date: 2019-11-27
:jbake-depth: ../../../../
:jbake-uri: wordpress/2019/11/27/mais-quest-ce-que-je-fais-de-mon-raspberry.adoc
:jbake-excerpt: 
:jbake-source: https://riduidel.wordpress.com/2019/11/27/mais-quest-ce-que-je-fais-de-mon-raspberry/
:jbake-style: wordpress

++++
<!-- wp:paragraph -->
<p>Puisquâ€™il y a en ce moment un hashtagÂ <a href="https://twitter.com/search?q=IUseMyRaspberryPiFor&#38;src=typd">#IUseMyRaspberryFor</a>Â qui expose des usages du Raspberry plus ou moins intÃ©ressants, laissez-moi vous parler de mon infrastructure domestique. En prÃ©ambule, mon Raspberry est branchÃ© en Ethernet Ã  la freebox <strong>et </strong>alimentÃ© par le port USB de la freebox. Parce que ce Rasbperry est uniquement un device rÃ©seau.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 id="_quest_ce_que_jhÃ©berge">Quâ€™est-ce que jâ€™hÃ©berge ?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Sur mon Raspberry, jâ€™ai donc</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Un serveur Apache qui sert<ul><li><a href="https://nicolas-delsaux.hd.free.fr/Shaarli/">Une instance</a>&#160;<a href="https://github.com/shaarli/Shaarli">Shaarli</a>&#160;dans laquelle jâ€™ai migrÃ© mes liens delicious, et qui commence Ã  Ãªtre raisonnablement remplie (6367 liens Ã  lâ€™heure actuelle)</li><li><a href="https://nicolas-delsaux.hd.free.fr/tweetledee/homerss.php">Une instance</a>&#160;<a href="https://github.com/tweetledee/tweetledee">tweetledee</a>&#160;pour lire Twitter en RSS (mais vous allez voir plus loin que je ne fais pas exactement Ã§a).</li><li><a href="https://nicolas-delsaux.hd.free.fr/rss-bridge/">Une instance</a>&#160;<a href="https://github.com/RSS-Bridge/rss-bridge">rss-bridge</a>&#160;pour rÃ©cupÃ©rer encore plus de flux RSS depuis des sources diverses (GQMagazine, World of Tanks, Facebook)</li></ul></li><li>Une instance mldonkey (ben oui, Ã§a marche toujours, tant que je tÃ©lÃ©charge uniquement des "vieux" fichiers)</li><li>Un script&#160;<a href="https://github.com/rcarmo/rss2imap">rss2imap</a>&#160;(et maintenant&#160;<a href="https://github.com/Riduidel/rrss2imap">rrss2imap</a>) pour envoyer mes flux RSS dans ma boÃ®te IMAP.</li><li>Et deux-trois scripts shell pour faire des backups de configuration.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Je nâ€™ai pas installÃ© de&#160;<a href="https://pi-hole.net/">pi-hole</a>&#160;dessus (mÃªme si jâ€™y ai souvent pensÃ©). Je nâ€™ai pas non plus de media-center qui tourne dessus (parce que je lâ€™ai migrÃ© sur mon NAS - câ€™est plus rapide et plus fiable). Par contre, jâ€™utilise rÃ©guliÃ¨rement mon Raspberry en tant que machine de rebond SSH pour sortir de chez certains clients pÃ©nibles. Et pour Ã§a, il ne me faut que le serveur SSH, qui est installÃ© dâ€™office par Raspbian.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 id="_mais_attends_comment_Ã§a_sintÃ¨gre">Mais attends, comment Ã§a sâ€™intÃ¨gre ?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Parce que bon, me contenter de dire jâ€™ai Ã§a, câ€™est mignon, mais il y a dans tout Ã§a un but. Le but officiel, câ€™est que ce Raspberry, qui est exposÃ© sur internet, me serve de mÃ©moire et de noeud central dans ma mÃ©thode de collecte et dâ€™organisation dâ€™information. Je vous montre (ben oui, <a href="https://plantuml.com/fr/">PlantUML</a>, câ€™est quand mÃªme bien chouette pour prÃ©senter de lâ€™information)</p>
<!-- /wp:paragraph -->

<!-- wp:image -->
<figure class="wp-block-image"><img src="http://localhost:18888/png/bLBTRjCm5BxtKtYzwYISGD5k4AhQJIcg6ElMP721KEJ69uqrnpQsisgWlH8lmOlX94sJIhqekSdn-SxtdT-PTTIugXJeWa7E9U3bpUhkSNsB2-Uq_H26Xkw2BNT5jQaic4n91z85cIf3LsdApFjG2ofh2S8zId8VGQmst84DdoV1k-0jkk0o4nM3oeXEF_GAfPA1RdAVm1iTkWEhIY1NeTjnvy2S5n-2V0QXDAJgx0GvpM2ZrDFP16DjQdzMrC3_Dd54G_Q9IqqDBR4VYLRIZpTsBmAmHoS8BUPNQV9jcIJHUhpdNmwTQVpmE5z7OyDPnHc8DtWqw-nH6xcOtqJNgzNdSTTZxKwZkw_HxUe-IbVZalAQTwt-_d60wvTdPa9L32yNIPAWdFjwFZryeLlwonz9exgEuovt3i0kaLGCiA5MRy2O5_mROVyTUi9-NXDUKjsuSoKO63pND2jW7teSFlBwPECxsS88KrlJszU9sBYWr0X-0abs04u0WvRsYbuHQfEIxmLd3EIFQQzyi0uWcNRQ-_y06MYZ_MQ8WDmT8Rr9feS9z7bwNpr3SXpJ66HQxmFrmoU3Whk54iEtXHiYNRbjGUqMkxFuI4Zhc85a_ih-0G00" alt="infos.png" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Bon, Ã©videment, le schÃ©ma nâ€™est pas super super clair. Mais comme je crois aux qualitÃ©s de&#160;<a href="https://plantuml.com/fr/">PlantUML</a>&#160;â€¦â€‹ je vais le laisser comme Ã§a ğŸ˜€. Et surtout, je nâ€™ai pas mis dans ce schÃ©ma mldonkey (parce que Ã§a aurait rajoutÃ© de la complexitÃ© inutile).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Donc, Shaarli mÃ©morise tout, et IFTTT envoie Ã§a dans ma timeline Twitter. A cÃ´tÃ© de Ã§a, rss2imap lit les flux RSS depuis RSS-Bridge, Tweetledee, et tout un paquet de "vrais" flux RSS. Et Ã©videment, le contenu de ces flux est envoyÃ© dans ma boÃ®te mail (ce qui mâ€™offre grÃ¢ce Ã  lâ€™IMAP une lecture synchronsiÃ©e sur tous mes devices Ã  un coÃ»t dÃ©risoire). Avec Ã§a, jâ€™ai enfin atteint Ã  mon avis le graal de la lecture de flux RSS (en tout modestie, bien sÃ»r) : jâ€™utilise un protocole standard, optimisÃ© pour du texte, afin de rÃ©cupÃ©rer mon texte oÃ¹ que je sois, la lecture est synchronisÃ©e, et jâ€™ai une interface de lecture vraiment top (parce que les clients mails sont conÃ§us pour gÃ©rer un gros volume de messages)</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 id="_et_comment_je_le_maintiens">Et comment je le maintiens ?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Cette question-lÃ , je me la suis posÃ©e plusieurs fois â€¦â€‹ parce que mon Raspberry a dÃ©ja mangÃ© quelques cartes micro-SD (vous nâ€™avez quâ€™Ã  regarder dans&#160;<a href="https://riduidel.wordpress.com/tag/raspberry/">les archives du blog</a>). Et donc, jâ€™ai maintenant un playbook Ansible qui me permet de reconstruire le Raspberry "presque" automatiquement. Ce script inclut (et câ€™est sans doute la meilleure partie) un cronjob qui, tous les jours, copie les fichiers de configuration de toutes ces applications sur mon NAS. Et ce script marche bien puisque jâ€™ai rÃ©installÃ© mon Raspberry il y a moins dâ€™un mois Ã  partir de ces fichiers de configuration. Donc, je sais quâ€™il me faut moins de deux heures dâ€™exÃ©cution de script (et environ 10 minutes dâ€™intervention manuelle) pour remettre mon Raspberry en Ã©tat quand la carte mÃ©moire claque (ce qui arrive beaucoup trop rÃ©guliÃ¨rement).</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 id="_comment_faire_mieux">Comment faire mieux ?</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Dâ€™abord, ce serait peut-Ãªtre bien dâ€™exposer mon fichier OPML quelque part dans Apache, Ã§a mâ€™aiderait bien Ã  communiquer sur mes sources. Ensuite, jâ€™aimerai beaucoup remplacer IFTTT par&#160;<a href="https://github.com/muesli/beehive">Beehive</a>, qui sâ€™exÃ©cuterait sur le Raspberry. Et câ€™est, je crois, Ã  peu prÃ¨s tout pour ce Raspberry. Parce que jâ€™ai toujours dans un coin de ma tÃªte ce projet de webradio â€¦â€‹</p>
<!-- /wp:paragraph -->
++++