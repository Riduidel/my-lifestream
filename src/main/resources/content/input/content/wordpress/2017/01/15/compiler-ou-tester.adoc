:jbake-type: post
:jbake-status: published
:jbake-title: Compiler ou tester ?
:jbake-tags: java,_mois_janv.,_ann√©e_2017
:jbake-date: 2017-01-15
:jbake-depth: ../../../../
:jbake-uri: wordpress/2017/01/15/compiler-ou-tester.adoc
:jbake-excerpt: 
:jbake-source: https://riduidel.wordpress.com/2017/01/15/compiler-ou-tester/
:jbake-style: wordpress

++++
<p>
En fin de cette semaine, une controverse int√©ressante a eu lieu sur twitter, habilement lanc√©e par cet article de "Uncle" Bob Martin : <a href="http://blog.cleancoder.com/uncle-bob/2017/01/11/TheDarkPath.html">The Dark Path</a>.
</p>
<p>
Regardez par exemple cette s√©lection de tweets sur le sujet :
</p>
<p>
<div class='twitter'>
<br/>
<span class="twitter_status">
</p>
<p>
<span class="author">
</p>
<p>
<a href="http://twitter.com/nmartignole" class="screenName"><img src="http://pbs.twimg.com/profile_images/849478944881602561/u897KYGD_mini.jpg" alt="profile of Principal Engineer at Doctolib / co-creator and organizer of Devoxx France conference/ Blog le Touilleur Express"/>nmartignole</a>
<br/>
<span class="name">Nicolas Martignole</span>
</p>
<p>
</span>
</p>
<p>
<a href="https://twitter.com/nmartignole/status/819¬†471¬†344¬†723¬†234¬†816" class="date">12 janv. 2017 √† 10:09:28</a>
</p>
<p>
<span class="content">
</p>
<p>
<span class="text">A must-read for any developers. I disagree with uncle bob. Type system is as important as Tests.  https://t.co/oZcJSiV0Et</span>
</p>
<p>
<span class="medias">
<br/>
</span>
</p>
<p>
</span>
</p>
<p>
<span class="twitter_status_end"/>
<br/>
</span>
<br/>
</div>
</p>
<p>
<div class='twitter'>
<br/>
<span class="twitter_status">
</p>
<p>
<span class="author">
</p>
<p>
<a href="http://twitter.com/clementd" class="screenName"><img src="http://pbs.twimg.com/profile_images/803642771814969345/Cw3GEDry_mini.jpg" alt="profile of he/him | they/them. ND. Developer at @FretLinkEu, Church of Œ∑-reduction. neurchi de traverse. profile pic by @bejug.  @clementd@framapiaf.org ü¶£"/>clementd</a>
<br/>
<span class="name">cŒªementd üö∏</span>
</p>
<p>
</span>
</p>
<p>
<a href="https://twitter.com/clementd/status/819¬†445¬†201¬†735¬†471¬†104" class="date">12 janv. 2017 √† 08:25:35</a>
</p>
<p>
<span class="content">
</p>
<p>
<span class="text">I'm not uncle Bob, but maybe this can be of interest : https://t.co/S43LcqsLWV</span>
</p>
<p>
<span class="medias">
<br/>
</span>
</p>
<p>
</span>
</p>
<p>
<span class="twitter_status_end"/>
<br/>
</span>
<br/>
</div>
</p>
<p>
<div class='twitter'>
<br/>
<span class="twitter_status">
</p>
<p>
<span class="author">
</p>
<p>
<a href="http://twitter.com/nicolas_frankel" class="screenName"><img src="http://pbs.twimg.com/profile_images/1063110424306929664/9pYrPAp6_mini.jpg" alt="profile of ü•ë Developer Advocate @Hazelcast
<br/>
‚úçÔ∏è Blogger at https://t.co/nnBYBMZOCC
<br/>
üéì Learner
<br/>
üßë‚Äçüíª Former developer and architect
<br/>
üìñ Author of https://t.co/p1nP5PIUmo"/>nicolas_frankel</a>
<br/>
<span class="name">Nicolas Frankel (@Home for a long time I believe)</span>
</p>
<p>
</span>
</p>
<p>
<a href="https://twitter.com/nicolas_frankel/status/819¬†554¬†972¬†320¬†878¬†592" class="date">12 janv. 2017 √† 15:41:46</a>
</p>
<p>
<span class="content">
</p>
<p>
<span class="text">Yet another Uncle Bob‚Äôs rant that I disagree with https://t.co/wSJBJRFRQp The more the compiler do, the better I am. But not he‚Ä¶ Sad! ;-)</span>
</p>
<p>
<span class="medias">
<br/>
</span>
</p>
<p>
</span>
</p>
<p>
<span class="twitter_status_end"/>
<br/>
</span>
<br/>
</div>
</p>
<p>
<div class='twitter'>
<br/>
<span class="twitter_status">
</p>
<p>
<span class="author">
</p>
<p>
<a href="http://twitter.com/romainguy" class="screenName"><img src="http://pbs.twimg.com/profile_images/459175652105527298/6qGNL0QI_mini.jpeg" alt="profile of Engineering Director for the Android Toolkit team at Google, Filament (https://t.co/fhPiT1D40e), Photography (https://t.co/0OzBRURRQJ‚Ä¶)"/>romainguy</a>
<br/>
<span class="name">Romain Guy</span>
</p>
<p>
</span>
</p>
<p>
<a href="https://twitter.com/romainguy/status/819¬†560¬†856¬†622¬†989¬†312" class="date">12 janv. 2017 √† 16:05:09</a>
</p>
<p>
<span class="content">
</p>
<p>
<span class="text">@nmartignole With a strong type system the code is the test. It doesn't get better than that</span>
</p>
<p>
<span class="medias">
<br/>
</span>
</p>
<p>
</span>
</p>
<p>
<span class="twitter_status_end"/>
<br/>
</span>
<br/>
</div>
</p>
<p>
On peut dire que les avis sont contrast√©s.
</p>
<p>
Et comme la meilleure fa√ßon de ne laisser aucun doute sur le sujet de ma propre stupidit√©, laissez-moi vous donner mon avis sur le sujet.
<br/>
<h2>A quoi sert le compilateur ?</h2>
<br/>
Il y a des ann√©es, √† l'√©poque du C, le compilateur servait √† transformer le code source √©crit dans un langage quasiment humainement compr√©hensible (le C) en un code ex√©cutable par la machine.
</p>
<p>
Aujourd'hui, quelque soit la plateforme d'ex√©cution (la JVM, la CLR de Microsoft, ou le r√©sultat d'une transformation LLVM), le compilateur fait beaucoup plus de choses : il simplifie, optimise, v√©rifie le code d'une fa√ßon tr√®s pouss√©e.
</p>
<p>
Et √† mon avis, c'est l'argument de Romain Guy : si le syst√®me de type est suffisamment pouss√©, il est impossible d'√©crire un code qui ne corresponde pas pr√©cis√©ment aux souhaits du d√©veloppeur. Mais √† quel prix ? C'est ce que cherche √† √©valuer Uncle Bob.
<br/>
<h2>Laisser le compilateur v√©rifier ? ou Tester</h2>
<br/>
Parce que l'avantage des tests sur le compilateur, c'est quand m√™me de laisser le d√©veloppeur v√©rifier les choses √† sa fa√ßon : il √©crit l'histoire dans son test, et v√©rifie les choses comme il le souhaite. Qui plus est, le compilateur est certes capable de v√©rifier certaines erreurs bas niveau, mais il y a tout un tas de trucs que le compilateur ne sera absolument pas capable de v√©rifier, et qui n√©cessiteront des tests.
<br/>
<h2>Alors quoi ?</h2>
<br/>
Heureusement, aujourd'hui, la question est en fait tranch√©e : les d√©veloppeurs utilisent les deux, en fonction √† la fois du co√ªt d'impl√©mentation de chacun, et de l'expressivit√© de chacun. Cela dit, je continue √† trouver cette question int√©ressante. Et, √† titre personnel, je comprend parfaitement la d√©cision de Kotlin et Swift d'emp√™cher les r√©f√©rences <code>null</code>, m√™me si je pr√©f√®re une solution plus simple : je n'utilise autant que possible jamais de <code>null</code>en Java. Et du coup, si <code>NullPointerException</code> il y a, c'est forc√©ment un bug qui n√©cessitera un test. Est-ce que c'est plus co√ªteux que d'avoir des <code>&#60;Object&#62;?</code> √† d√©r√©f√©rencer ? Je n'ai pas l'impression. Mais bien s√ªr, je peux me tromper.
</p>
++++