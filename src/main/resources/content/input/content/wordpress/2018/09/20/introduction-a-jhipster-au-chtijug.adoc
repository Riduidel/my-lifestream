:jbake-type: post
:jbake-status: published
:jbake-title: Introduction √† JHipster au chtijug
:jbake-tags: chtijug,java,javascript,open-source,spring,_mois_sept.,_ann√©e_2018
:jbake-date: 2018-09-20
:jbake-depth: ../../../../
:jbake-uri: wordpress/2018/09/20/introduction-a-jhipster-au-chtijug.adoc
:jbake-excerpt: 
:jbake-source: https://riduidel.wordpress.com/2018/09/20/introduction-a-jhipster-au-chtijug/
:jbake-style: wordpress

++++
<p>
<div class='twitter'>
<br/>
<span class="twitter_status">
</p>
<p>
<span class="author">
</p>
<p>
<a href="http://twitter.com/ippontech" class="screenName"><img src="http://pbs.twimg.com/profile_images/1037335349897375745/0SSQ5A2f_mini.jpg" alt="profile of Cabinet de conseil - Discovery to Delivery
<br/>
La Matinale üëâ https://t.co/cMCL39P4jA
<br/>
#Design #Digital #Data #Cloud #Fullstack #Marketing #Agilite"/>ippontech</a>
<br/>
<span class="name">Ippon Technologies</span>
</p>
<p>
</span>
</p>
<p>
<a href="https://twitter.com/ippontech/status/1¬†042¬†818¬†412¬†580¬†356¬†096" class="date">20 sept. 2018 √† 18:50:58</a>
</p>
<p>
<span class="content">
</p>
<p>
<span class="text">Salle comble √† #Lille pour le @chtijug avec @juliendubois pour pr√©senter @java_hipster #JHipster #OpenSource https://t.co/JifZMnJ51b</span>
</p>
<p>
<span class="medias">
<br/>
<span class="media media-photo">
<br/>
<img src="http://pbs.twimg.com/media/DnjVaO_WwAEAV8-.jpg" alt="1¬†042¬†817¬†960¬†413¬†413¬†377"/>
<br/>
</span>
<br/>
<span class="media media-photo">
<br/>
<img src="http://pbs.twimg.com/media/DnjVd17WwAAhUUq.jpg" alt="1¬†042¬†818¬†022¬†405¬†226¬†496"/>
<br/>
</span>
<br/>
<span class="media media-photo">
<br/>
<img src="http://pbs.twimg.com/media/DnjVoZ7XcAEKpRY.jpg" alt="1¬†042¬†818¬†203¬†867¬†639¬†809"/>
<br/>
</span>
<br/>
</span>
</p>
<p>
</span>
</p>
<p>
<span class="twitter_status_end"/>
<br/>
</span>
<br/>
</div>
<br/>
<div id="preamble">
<br/>
<div class="sectionbody">
<br/>
<div class="paragraph data-line-3">
</p>
<p>
Julien Dubois vient donc nous pr√©senter le framework qu‚Äôil a cr√©√© ‚Ä¶‚Äã <a href="https://www.jhipster.tech/">JHipster</a>. <a href="https://spring.io/projects/spring-framework">Spring</a>, c‚Äôest un gros paquet d‚Äôingr√©dients. <a href="https://spring.io/projects/spring-boot">Spring Boot</a>, c‚Äôest la m√™me chose bien packag√©e. Et JHipster, c‚Äôest ce package encore d√©cor√©. Autrement dit, c‚Äôest un g√©n√©rateur d‚Äôapplication full stack avec Spring Boot en back-end, Angular et React en front-end (mais Vuejs arrive bient√¥t), et pr√©configur√© pour √™tre facilement d√©ployable.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-9">
</p>
<p>
A noter que JHipster est 100% open-source sous licence Apache (la meilleure pour le commerce, quand m√™me).
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-11">
</p>
<p>
C‚Äôest un projet qui r√©ussit : 22 d√©veloppeurs dans la core team, 500 contributeurs, des conf√©rences, des √©toiles GitHub, ‚Ä¶‚Äã
</p>
<p>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div class="sect1 data-line-13">
<br/>
<h2 id="truepourquoi">Pourquoi ?</h2>
<br/>
<div class="sectionbody">
<br/>
<div class="paragraph data-line-15">
</p>
<p>
JHipster fait gagner du temps au d√©marrage (avec des √©tudes qui montrent un gain de 6 semaines au d√©marrage), au build (comme le projet est tr√®s utilis√©, le code g√©n√©r√© est stable et fiable), et au run (le monitoring est d√©ja pr√©vu).
</p>
<p>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div class="sect1 data-line-17">
<br/>
<h2 id="truestack_technique">Stack technique</h2>
<br/>
<div class="sectionbody">
<br/>
<div class="sect2 data-line-19">
<br/>
<h3 id="truefront_end">front-end</h3>
<br/>
<div class="paragraph data-line-20">
</p>
<p>
JHipster propose une stack compl√®te, avec des front bien connus. Mais attention : tous les widgets de l‚Äôunivers ne sont pas support√©s. Parce que √ßa fait trop de code d‚Äôune part, mais aussi parce que ce sont des technologies qui √©voluent tr√®s rapidement.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect2 data-line-23">
<br/>
<h3 id="trueback_end">back-end</h3>
<br/>
<div class="paragraph data-line-24">
</p>
<p>
Evidement, le back est int√©gralement Spring .. il y a toutefois quelques choix qui sont faits (par exemple, JHipster utilise toujours <a href="https://metrics.dropwizard.io/">DropWizard Metrics</a>, parce que la communaut√© n‚Äôest pas fan des nouvelles <a href="https://micrometer.io/">m√©triques Spring</a>).
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect2 data-line-26">
<br/>
<h3 id="trueoutillage">Outillage</h3>
<br/>
<div class="paragraph data-line-27">
</p>
<p>
Les tests de base sont d√©ja pr√©par√©s. En revanche, les tests Gatling ou <a href="http://www.protractortest.org/#/">Protactor</a> sont optionnels ‚Ä¶‚Äã mais ajoutables facilement.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-30">
</p>
<p>
Par ailleurs, JHipster suppose que vous utilisez Docker ‚Ä¶‚Äã parce que c‚Äôest pratique et c‚Äôest quasiment un standard. Cependant, si vous voulez utilisez MySQL ou Elastic, il faudra en passer par l√†.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-33">
</p>
<p>
Le d√©ploiement est pr√©par√© pour heroku (beaucoup utilis√© parce que gratuit), Kubernetes, OpenShift, ‚Ä¶‚Äã
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect2 data-line-35">
<br/>
<h3 id="truearchitecture">Architecture</h3>
<br/>
<div class="paragraph data-line-36">
</p>
<p>
JHipster permet de g√©n√©rer une architecture microservice, en cr√©ant un module par service de back-end et un ou plusieurs modules de front-end.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-38">
</p>
<p>
Il peut aussi utiliser une service registry (celle de <a href="https://github.com/Netflix/eureka">Netflix</a> ou de <a href="https://www.consul.io/">Consul</a> sont int√©gr√©es) ou une API gateway.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-40">
</p>
<p>
L‚Äôobjectif √©tant d‚Äôavoir la m√™me exp√©rience d√©veloppeur que pour un monolithe. Ca para√Æt s√©duisant sur le papier ‚Ä¶‚Äã
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-42">
</p>
<p>
Et enfin, il est possible de cr√©er des microservices r√©actifs utilisant Spring Boot 2 ‚Ä¶‚Äã et les composants Spring r√©actifs, √©videment.
</p>
<p>
Toutefois, sur le sujet des microservices, je me dois d'avouer qu'√† mon ens on est d√©ja l√† dans une d√©marche d√©pass√©e : aujourd'hui, le march√© semble converger vers les service meshs (<a href="https://istio.io/">Istio</a>, <a href="https://www.consul.io/intro/getting-started/connect.html">Consul Connect</a>, ou <a href="https://conduit.io/">Conduit</a>). Et franchement, continuer √† impl√©menter la couche de service dans l'application ... c'est lourd, c'est peu efficace, et √ßa rajoute de la complexit√© au mauvais endroit.
</p>
<p>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div class="sect1 data-line-44">
<br/>
<h2 id="trued_mo">D√©mo</h2>
<br/>
<div class="sectionbody">
<br/>
<div class="paragraph data-line-46">
</p>
<p>
Et c‚Äôest parti pour la d√©mo √† la cool !
</p>
<p>
</div>
<br/>
<div class="sect2 data-line-48">
<br/>
<h3 id="trueinstallation">Installation</h3>
<br/>
<div class="paragraph data-line-49">
</p>
<p>
On peut <a href="https://www.jhipster.tech/installation/">installer JHipster</a> avec npm (wat ?), Homebrew, Chocolatey, ‚Ä¶‚Äã
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-51">
</p>
<p>
Mais on peut aussi, comme pour <a href="https://start.spring.io/">Spring boot</a> (ou <a href="http://wisdom-framework.org/download">Wisdom Framework</a>), cr√©er le projet depuis le site web de JHipster. Donc on se connecte, et gr√¢ce √† l‚Äôint√©gration GitHub/GitLab, le projet est directement cr√©√© dans le gestionnaire de source (comme avec <a href="https://jenkins-x.io/commands/jx_create_jhipster/">Jenkins-X</a>).
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-54">
</p>
<p>
Les options de cr√©ation de projet sont assez nombreuses (monitoring, authentification, base de donn√©es, ‚Ä¶‚Äã). C‚Äôest l‚Äôun des int√©r√™ts de JHipster : g√©rer des sujets auxquels Spring Boot ne s‚Äôint√©resse pas. L‚Äôimpact √©vident, c‚Äôest que le d√©marrage est plus lent que Spring Boot ‚Ä¶‚Äã qui n‚Äôest d√©ja pas fameux sur ce sujet. Parce que JHipster d√©marre un EHCache, un hibernate, ‚Ä¶‚Äã
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-59">
</p>
<p>
En dehors de √ßa, JHipster peut g√©rer l‚Äôacc√®s √† ElasticSearch, ou Kafka. Dans le cas d‚ÄôElastic, √ßa a un impact sur le front et sur le back (parce que JHipster g√©n√®re les outils d‚Äôacc√®s, et l‚Äôinterface de recherche). Qui plus est, le <code>docker-compose.yaml</code> sera √©galement g√©n√©r√© pour le d√©veloppement avec Elastic.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-63">
</p>
<p>
Et lorsqu‚Äôon clique sur "generate on GitHub", le projet est automatiquement g√©n√©r√© avec les bons <code>*ignore</code>.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect2 data-line-65">
<br/>
<h3 id="trueouverture_du_projet">Ouverture du projet</h3>
<br/>
<div class="paragraph data-line-67">
</p>
<p>
Donc le projet a √©t√© g√©n√©r√© avec un <code>pom.xml</code> pour maven, et un <code>package.xml</code> pour g√©n√©rer le front-end. Et au lancement, on d√©marre node et maven, le front et le back se lance (pour le front, apr√®s avoir copi√© 1/2 Go de d√©pendances Node). Ca me trouble un choua√Ø, parce que je ne vois pas pourquoi il faut lancer deux outils de build diff√©rents ... pour produire les deux morceaux de la m√™me application.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-70">
</p>
<p>
Spring-boot et webpack sont configur√©s pour faire du rechargement √† chaud, ce qui fait qu‚Äôil n‚Äôy a pas besoin de relancer les outils de build. C'est quelque chose qu'on a aussi dans Spring-Boot, dans Wisdom Framework - mais bien mieux (d√©sol√©, mais c'est vrai) ou m√™me en Rust avec <a href="https://github.com/passcod/cargo-watch">cargo watch</a>.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-72">
</p>
<p>
L‚Äôapplication est g√©n√©r√©e avec de l‚Äôauthentification, ce qui est cool, mais aussi tout un tas d'√©crans d‚Äôadministration. On peut voir les m√©triques, les niveaux de logs (et les changer), ‚Ä¶‚Äã C‚Äôest franchement pratique.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-76">
</p>
<p>
Il y a √©galement un <a href="https://www.browsersync.io/">browser-sync</a>, qui permet d‚Äôavoir plusieurs clients synchronis√©s (c‚Äôest typiquement pratique pour le d√©veloppement web avec des √©crans r√©actifs).
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-78">
</p>
<p>
Et encore la configuration Docker ‚Ä¶‚Äã avec le fichier de configuration permettant l‚Äôacc√®s √† la base de donn√©es.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-80">
</p>
<p>
Et beaucoup de configuration Java, pour optimiser les performances de Jackson, par exemple, ou pour corriger des impl√©mentations pas optimales, ou pour lier le front-end et le back-end. Une librairie √©quivalente existe √©videment c√¥t√© Javascript, encore une fois pour faciliter la vie du d√©veloppeur.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-83">
</p>
<p>
Et enfin les bases d‚Äôune application : un utilisateur, ses droits, les repository Spring Data, les contr√¥leurs web permettant d‚Äôy acc√©der, et m√™me les messages internationalis√©s.
</p>
<p>
</div>
<br/>
<div class="sect3 data-line-85">
<br/>
<h4 id="trueecrire_du_code">Ecrire du code</h4>
<br/>
<div class="paragraph data-line-86">
</p>
<p>
JHipster fournit des sous-g√©n√©rateurs. Donc pour cr√©er une nouvelle entit√©, il suffit de taper <code>jhipster entity Foo</code> par exemple.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-89">
<br/>
<h4 id="truejhipster_studio"><a href="https://start.jhipster.tech/jdl-studio/">JHipster Studio</a></h4>
<br/>
<div class="paragraph data-line-90">
</p>
<p>
Avec ce studio, on peut d√©crire facilement des entit√©s dans un DSL ‚Ä¶‚Äã qui ressemble <strong>furieusement</strong> √† un descripteur UML. Ce studio est utilisable dans une interface web, ou via un plugin Eclipse (cool). Et le mod√®le peut √™tre appliqu√© sur une application pr√©existante. L‚Äôavantage du studio web, c‚Äôest qu‚Äôil g√©n√®re une pull request automatiquement, ce qui est cool. Ce qui l‚Äôest moins, c‚Äôest que <strong>110 fichiers</strong> ont √©t√© g√©n√©r√©s pour 4 entit√©s. 110 fichiers ! C‚Äôest pas un peu beaucoup ?
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-98">
</p>
<p>
Si, mais il y a quand m√™me un front-end, un back-end, et toute la connexion entre les deux. C‚Äôest malgr√© tout impressionnant.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-101">
</p>
<p>
M√™me si √ßa ne marche pas.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-103">
<br/>
<h4 id="truem_ta_mod_le">M√©ta-mod√®le</h4>
<br/>
<div class="paragraph data-line-104">
</p>
<p>
Julien rencontre √† ce moment-l√† une difficult√© qui l‚Äôoblige √† tout r√©g√©n√©rer ‚Ä¶‚Äã. y compris le code Java. Pour √ßa, JHipster maintient un m√©ta-mod√®le avec lequel il g√©n√®re le code Java et le code Javascript.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-107">
</p>
<p>
Ca ne marche pas mieux apr√®s, mais c‚Äôest n√©anmoins impressionnant.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-109">
</p>
<p>
Surtout quand je me rends compte qu‚Äôen fait, JHipster est un outil de g√©n√©ration √† base de mod√®le UML. Mod√®les qui sont bien cach√©s, c‚Äôest vrai, mais qui se r√©v√®lent bien pratiques.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-112">
<br/>
<h4 id="truediff_rence_dev_prod">Diff√©rence dev-prod</h4>
<br/>
<div class="paragraph data-line-113">
</p>
<p>
Pour aller plus loin, Julien nous montre que l‚Äôapplication, quand elle se lance en mode production, d√©marre plus lentement, parce que les comportements sont diff√©rents :
</p>
<p>
</div>
<br/>
<div class="ulist data-line-115">
<br/>
<ul>
<br/>
<li>Le code Angular est minifi√©</li>
<br/>
<li>Les strat√©gies de cache c√¥t√© serveur sont plus aggressives</li>
<br/>
<li>Les descripteurs Swagger peuvent (ou pas) √™tre g√©n√©r√©s</li>
<br/>
</ul>
<br/>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-119">
<br/>
<h4 id="truetests">Tests</h4>
<br/>
<div class="paragraph data-line-120">
</p>
<p>
Sur cette application, 160 tests sont g√©n√©r√©s pour le back et 152 pour le front. Et c‚Äôest l√† qu‚Äôon voit tout ce que cache ce g√©n√©rateur ‚Ä¶‚Äã. Il y a 5 entit√©s. Et √ßa m√©rite 300 tests ? J‚Äôimagine que oui, bien s√ªr.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-123">
<br/>
<h4 id="truemise_jour">Mise √† jour</h4>
<br/>
<div class="paragraph data-line-124">
</p>
<p>
La ligne de commande contient une commande <code>jhipster update</code> qui permet de mettre √† jour le projet par rapport √† une version suivante, via un merge git. C‚Äôest conceptuellement vraiment, mais alors vraiment balaize. Et √ßa facilite √©videment √©norm√©ment les mises √† jour de version.
</p>
<p>
</div>
<br/>
</div>
<br/>
<div class="sect3 data-line-128">
<br/>
<h4 id="truemise_en_prod">Mise en prod</h4>
<br/>
<div class="paragraph data-line-129">
</p>
<p>
Pour finir, il existe des sous-g√©n√©rateurs permettant de d√©ployer l‚Äôapplication dans les infrastructures de prod. Julien prend donc l‚Äôexemple de <code>jhipster heroku</code> ‚Ä¶‚Äã qui d√©ploie chez heroku (dingue).
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-132">
</p>
<p>
Et les diff√©rents cloudeurs ont produit des optimisations sp√©cifiques. Par exemple, Google App Engine d√©ploie le front-end sur son CDN, et les requ√™tes qui arrivent sur votre "serveur" sont celles qui concernent le back uniquement.
</p>
<p>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
</div>
<br/>
<div class="sect1 data-line-135">
<br/>
<h2 id="trueconclusion">Conclusion</h2>
<br/>
<div class="sectionbody">
<br/>
<div class="paragraph data-line-136">
</p>
<p>
Julien vend particuli√®rement bien son outil. Et honn√™tement, il a raison : JHipster est bien fichu, et fournit un certain nombre de services spectaculairement pratiques. L‚Äôun des plus importants, mais des moins visibles, est la mise en place d‚Äôune approche MDA pragmatique et efficace. En revanche, ayant utilis√© pendant un certain temps Wisdom Framework, je trouve le choix de se baser sur Spring pour construire un g√©n√©rateur d‚Äôapplications magnifi√© me para√Æt ‚Ä¶‚Äã discutable : je trouve la quantit√© d'√©l√©ments g√©n√©r√©s hallucinante, pour un r√©sultat qui est raisonnablement joli, mais pas non plus fascinant (typiquement, les d√©mos de Julien n‚Äôont montr√© que Twitter Bootstrap (aucun des √©l√©ments visuels ne n√©cessitait Angular ou React). Malheureusement, je pense qu‚Äôil est de moins en moins pertinent de "g√¢cher" du CPU en fournissant un √©chafaudage de projet - aussi pouss√© soit-il. En effet, on voit maintenant √©merger des approches - type "Function as a service" - qui interdisent totalement ce genre d‚Äôoutillage.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-143">
</p>
<p>
Alors certes √ßa n‚Äôest pas la cible.
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-145">
</p>
<p>
Mais quand m√™me. Quelle application d√©ployer avec JHipster ? Un outil "l√©ger" non critique ? Quel genre d‚Äôoutil peut encore avoir besoin de la "puissance" de la JVM, en √©tant toutefois assez simple pour √™tre d√©veloppable en PHP ?
</p>
<p>
</div>
<br/>
<div class="paragraph data-line-148">
</p>
<p>
Autrement dit, simplifier Spring, pour moi, est une "solution" qui ne me para√Æt pas, malgr√© tous les exemples de mise en oeuvre pr√©sent√©s - avec brio, je dois dire - par Julien, √™tre applicable √† un cas "utile". Quelque part, c‚Äôest avant tout un outil de commodisation du d√©veloppement, applicable dans les cas o√π le logiciel ne doit pas √™tre un obstacle √† une t√¢che, mais ne doit pas non plus √™tre un facteur de succ√®s.
</p>
<p>
</div>
<br/>
</div>
<br/>
</div>
</p>
++++